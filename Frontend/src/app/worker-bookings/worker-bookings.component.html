<div class="main-div">
    <app-worker-header></app-worker-header>
    <div class="container mt-5">
      <h2 class="text-center text-white mb-4" style="margin-top: 30px;">My Bookings</h2>
  
      <!-- Show a custom message if no bookings are available -->
      <div *ngIf="bookings.length === 0" class="text-center text-white mt-5" style="padding-top: 180px;">
        <p class="fs-4 fw-bold">Oops! No bookings yet.</p>
        <button class="btn btn-warning mt-3" (click)="redirectToServices()">Check Requests</button>
      </div>
  
      <!-- Display bookings when available -->
      <div class="row" *ngIf="bookings.length > 0">
        <div class="col-md-4 each-req-div" *ngFor="let booking of bookings">
          <div class="card shadow-sm">
            <div class="card-body">
              <h5 class="card-title">Service Name: <span class="text-warning">{{ services[booking.workerId] }}</span></h5>
              <p class="card-text">Customer Name: <span class="ser-name-span"> {{ workers[booking.userId] }} </span></p>
              <p class="card-text"><strong>City:</strong> {{ addresses[booking.userId] }}</p>
              <p class="card-text"><strong>Home Address:</strong> {{ homeAddresses[booking.serviceId] }}</p>
              <p class="card-text"><strong>Payment Status:</strong> {{ paymentStatusMap[booking.serviceId] }}</p>
              <p class="card-text">Booked For Date: <span class="ser-name-span">{{ dateStore[booking.id] }}</span></p>
<p class="card-text">Booked For Time: <span class="ser-name-span">{{ timeStore[booking.id] }}</span></p>

              <p class="card-text">
                Booking Status:
                <span class="badge"
                  [ngClass]="{
                    'bg-success': booking.bookingStatus === 'COMPLETED',
                    'bg-primary': booking.bookingStatus === 'ONGOING',
                    'bg-danger': booking.bookingStatus === 'CANCELLED'
                  }">
                  {{ booking.bookingStatus }}
                </span>
              </p>
              <!-- Show button only if booking is not completed -->
              <button 
                *ngIf="booking.bookingStatus !== 'COMPLETED'" 
                (click)="openModal(booking.id)" 
                class="btn btn-success">
                Completed
              </button>
              

  <div class="booking-datetime" >
    <small>Booked on: </small>
    <small>{{booking.date}}, </small>
    <small> Time: {{ booking.time}}</small>
  </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  
    <!-- Bootstrap Modal -->
    <div
  class="modal fade"
  id="codeModal"
  #codeModal
  tabindex="-1"
  aria-labelledby="codeModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="codeModalLabel">Enter Verification Code</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <input
          type="text"
          class="form-control"
          [(ngModel)]="verificationCode"
          placeholder="Enter code"
        />
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Cancel
        </button>
        <button type="button" class="btn btn-primary" (click)="submitCode()">Submit</button>
      </div>
    </div>
  </div>
</div>

  
  









